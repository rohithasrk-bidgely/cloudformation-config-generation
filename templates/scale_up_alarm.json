{
  "SpotFleetScaleDownAlarm": {
    "Type": "AWS::CloudWatch::Alarm",
    "Properties": {
      "ActionsEnabled": true,
      "AlarmName": "$NAME-spotfleet-alarm-scaledown-$TAGENV",
      "AlarmDescription": "$NAME-spotfleet-alarm-scaledown-$TAGENV",
      "Namespace": "AWS/SQS",
      "MetricName": "ApproximateNumberOfMessagesVisible",
      "Dimensions": [
        {
          "Name": "QueueName",
          "Value": "GbTempDataReadyEvent-perftest"
        }
      ],
      "Statistic": "Average",
      "Period": "300",
      "EvaluationPeriods": "2",
      "Threshold": 100,
      "Unit": "Percent",
      "ComparisonOperator": "LessThanThreshold",
      "AlarmActions": [
        {
          "Ref": "SpotFleetScalingDownPolicy"
        }
      ],
      "OKActions": [
        {
          "Fn::Join": [
            "",
            [
              "arn:aws:sns:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":SPOT-PROD"
            ]
          ]
        }
      ]
    }
  }
}
